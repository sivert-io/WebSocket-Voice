---
title: üéôÔ∏è Voice Communication
description: High-quality audio with noise suppression and echo cancellation
icon: Mic
---

# üéôÔ∏è Advanced Voice Communication

Gryt provides enterprise-grade voice communication with crystal-clear audio quality, advanced noise suppression, and real-time voice activity detection.

## ‚ú® Key Features

### üéØ **High-Quality Audio**
- **Crystal-Clear Voice**: Professional-grade audio quality with minimal latency
- **Noise Suppression**: Advanced algorithms filter out background noise
- **Echo Cancellation**: Eliminates echo and feedback automatically
- **Automatic Gain Control**: Maintains consistent volume levels

### üéõÔ∏è **Voice Controls**
- **Mute/Unmute**: Server-synchronized microphone control with visual feedback
- **Deafen**: Local audio output control (mutes incoming audio)
- **Push-to-Talk**: Coming soon - hands-free voice activation
- **Voice Activation**: Automatic transmission based on voice activity

### üìä **Real-time Feedback**
- **Voice Activity Detection**: Visual indicators showing who's speaking
- **Audio Level Meters**: Real-time visualization of audio input/output
- **Connection Status**: Clear indicators for connection states
- **Speaking Indicators**: Visual feedback for all participants

## üéõÔ∏è Voice Controls

### Mute Control

The mute button provides server-synchronized microphone control:

```typescript
// Mute state management
interface MuteState {
  isMuted: boolean;
  serverSynchronized: boolean;
  visualFeedback: 'muted' | 'unmuted' | 'connecting';
}

// Toggle mute with server sync
const toggleMute = async () => {
  const newMuteState = !currentMuteState;
  
  // Update local state immediately for responsive UI
  setLocalMuteState(newMuteState);
  
  // Send to server for synchronization
  await socket.emit('updateMute', newMuteState);
  
  // Update audio pipeline
  updateAudioPipeline({ muted: newMuteState });
};
```

**Visual Feedback:**
- üî¥ **Red**: Microphone is muted
- üü¢ **Green**: Microphone is active
- üü° **Yellow**: Mute state is syncing with server

### Deafen Control

Deafen provides local audio output control:

```typescript
// Deafen state management
interface DeafenState {
  isDeafened: boolean;
  localOnly: boolean; // Doesn't affect server state
  audioOutput: 'muted' | 'active';
}

// Toggle deafen (local only)
const toggleDeafen = () => {
  const newDeafenState = !currentDeafenState;
  
  // Update local audio output
  setAudioOutputMuted(newDeafenState);
  
  // Update visual state
  setDeafenState(newDeafenState);
};
```

**Visual Feedback:**
- üü† **Orange**: Audio output is deafened
- üü¢ **Green**: Audio output is active
- **Note**: Others still see you as connected when deafened

### Push-to-Talk (Coming Soon)

Push-to-talk will provide hands-free voice activation:

```typescript
// Push-to-talk configuration
interface PushToTalkConfig {
  enabled: boolean;
  keyBinding: string; // e.g., 'Space', 'Ctrl+Space'
  activationThreshold: number; // Voice level threshold
  releaseDelay: number; // Delay before deactivation
}

// Push-to-talk handler
const handlePushToTalk = (pressed: boolean) => {
  if (pressed) {
    // Activate microphone
    setMicrophoneActive(true);
  } else {
    // Deactivate after delay
    setTimeout(() => {
      setMicrophoneActive(false);
    }, config.releaseDelay);
  }
};
```

## üéôÔ∏è Audio Quality Features

### Noise Suppression

Advanced noise suppression algorithms filter out unwanted background noise:

```typescript
// Noise suppression configuration
interface NoiseSuppressionConfig {
  enabled: boolean;
  aggressiveness: 'low' | 'medium' | 'high';
  customThreshold: number; // -50dB to -10dB
}

// Audio processing pipeline
const processAudio = (audioBuffer: AudioBuffer) => {
  // 1. Noise suppression
  const noiseFiltered = applyNoiseSuppression(audioBuffer, config);
  
  // 2. Echo cancellation
  const echoCancelled = applyEchoCancellation(noiseFiltered);
  
  // 3. Automatic gain control
  const gainControlled = applyGainControl(echoCancelled);
  
  // 4. Volume adjustment
  const volumeAdjusted = applyVolumeControl(gainControlled, userVolume);
  
  return volumeAdjusted;
};
```

### Echo Cancellation

Eliminates echo and feedback automatically:

- **Acoustic Echo Cancellation**: Removes echo from speakers
- **Adaptive Algorithms**: Automatically adjusts to room acoustics
- **Real-time Processing**: Minimal latency echo removal
- **Multi-channel Support**: Handles stereo and surround sound

### Automatic Gain Control

Maintains consistent volume levels:

- **Dynamic Range Compression**: Smooths out volume variations
- **Voice Level Normalization**: Keeps all speakers at similar levels
- **Background Noise Gating**: Reduces noise during quiet periods
- **Peak Limiting**: Prevents audio distortion

## üìä Voice Activity Detection

### Real-time Detection

Advanced voice activity detection provides accurate speaking indicators:

```typescript
// Voice activity detection
interface VoiceActivityConfig {
  threshold: number; // -50dB to -10dB
  attackTime: number; // 10ms
  releaseTime: number; // 100ms
  smoothing: boolean;
}

// Voice activity detection algorithm
const detectVoiceActivity = (audioLevel: number) => {
  const threshold = config.threshold;
  const isAboveThreshold = audioLevel > threshold;
  
  // Apply attack/release curves
  if (isAboveThreshold) {
    // Fast attack
    return applyAttackCurve(audioLevel, config.attackTime);
  } else {
    // Slow release
    return applyReleaseCurve(audioLevel, config.releaseTime);
  }
};
```

### Visual Indicators

Real-time visual feedback for all participants:

- **Speaking Animation**: Pulsing border around user avatars
- **Audio Level Bars**: Real-time visualization of voice levels
- **Connection Status**: Clear indicators for connection states
- **Mute Indicators**: Visual feedback for mute/deafen states

## üéõÔ∏è Audio Pipeline

The client implements a sophisticated audio processing pipeline:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Microphone  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ Noise Gate  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Volume    ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    Mute     ‚îÇ
‚îÇ   Input     ‚îÇ    ‚îÇ  Filtering  ‚îÇ    ‚îÇ  Control    ‚îÇ    ‚îÇ   Control   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ   Visual    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÇ   Final     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÇ     SFU     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  Feedback   ‚îÇ    ‚îÇ  Analyser   ‚îÇ    ‚îÇTransmission ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Stage 1: Noise Gate
- **Purpose**: Filters out background noise below threshold
- **Configuration**: Adjustable threshold (-50dB to -10dB)
- **Timing**: Fast attack (10ms), smooth release (100ms)
- **Effect**: Clean audio transmission

### Stage 2: Volume Control
- **Purpose**: User-adjustable volume with 2x boost
- **Range**: 0% to 200% volume
- **Scaling**: Logarithmic for natural perception
- **Real-time**: Instant response without audio glitches

### Stage 3: Mute Control
- **Purpose**: Server-synchronized mute functionality
- **State**: Local and server state synchronization
- **Visual**: Clear visual feedback to all participants
- **Recovery**: Automatic state recovery on reconnection

### Stage 4: SFU Transmission
- **Purpose**: Efficient audio forwarding to other participants
- **Protocol**: WebRTC with selective forwarding
- **Quality**: Maintains audio quality across network
- **Latency**: Minimal latency for real-time communication

## üîß Configuration

### Audio Settings

Configure audio quality and behavior:

```typescript
// Audio configuration interface
interface AudioConfig {
  // Device settings
  microphone: {
    deviceId: string;
    volume: number; // 0-200%
    boost: boolean;
  };
  
  // Output settings
  speakers: {
    deviceId: string;
    volume: number; // 0-200%
    deafened: boolean;
  };
  
  // Processing settings
  processing: {
    noiseSuppression: boolean;
    echoCancellation: boolean;
    automaticGainControl: boolean;
    noiseGateThreshold: number; // -50dB to -10dB
  };
  
  // Voice activity detection
  voiceActivity: {
    enabled: boolean;
    threshold: number;
    attackTime: number;
    releaseTime: number;
  };
}
```

### Device Management

Hot-swappable audio device selection:

```typescript
// Device management
const audioDevices = {
  microphones: await navigator.mediaDevices.enumerateDevices()
    .then(devices => devices.filter(d => d.kind === 'audioinput')),
  
  speakers: await navigator.mediaDevices.enumerateDevices()
    .then(devices => devices.filter(d => d.kind === 'audiooutput'))
};

// Switch device without reconnection
const switchMicrophone = async (deviceId: string) => {
  const newStream = await navigator.mediaDevices.getUserMedia({
    audio: { deviceId: { exact: deviceId } }
  });
  
  // Update audio pipeline
  updateAudioPipeline({ microphoneStream: newStream });
};
```

## üêõ Troubleshooting

### Common Audio Issues

**Microphone not working?**
```bash
# Check browser permissions
# Verify HTTPS in production
# Test with different browsers
# Check device selection
```

**Audio quality issues?**
```bash
# Adjust noise gate threshold
# Check microphone input levels
# Verify sample rate compatibility
# Test with different audio devices
```

**Echo or feedback?**
```bash
# Enable echo cancellation
# Check speaker volume levels
# Use headphones instead of speakers
# Adjust room acoustics
```

**Voice activity detection not working?**
```bash
# Adjust voice activity threshold
# Check microphone sensitivity
# Verify audio levels
# Test with different environments
```

### Debug Tools

Enable detailed audio debugging:

```typescript
// Enable audio debug mode
localStorage.setItem('debug', 'gryt:audio:*');

// Audio level monitoring
const audioLevels = {
  input: getMicrophoneLevel(),
  output: getSpeakerLevel(),
  processed: getProcessedAudioLevel()
};

console.log('Audio Levels:', audioLevels);
```

## üìä Performance Metrics

### Audio Quality Metrics

Monitor audio quality in real-time:

- **Latency**: < 50ms end-to-end
- **Packet Loss**: < 0.1% under normal conditions
- **Jitter**: < 10ms variation
- **Bitrate**: Adaptive 32-128 kbps
- **Sample Rate**: 48kHz for optimal quality

### Resource Usage

Efficient audio processing:

- **CPU Usage**: < 5% for audio processing
- **Memory Usage**: < 50MB for audio buffers
- **Network Usage**: Adaptive based on quality settings
- **Battery Impact**: Optimized for mobile devices

---

**Ready to experience crystal-clear voice communication?** Check out our [Quick Start Guide](/docs/quick-start) to get started!
